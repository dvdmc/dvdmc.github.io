---
import Modal from './Modal.astro';

const { title, authors, conference, videoUrl, articleUrl, pdfUrl, projectUrl, bibtex } = Astro.props;
const uniqueId = title.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
---

<div class="p-4 rounded-md border-theme-blue/20 border-2 flex flex-col sm:flex-row space-x-6 items-center bg-white">
  {videoUrl && (
    <div class="p-2 w-2/3 sm:w-1/3 flex-shrink-0">
      <iframe
        class="w-full aspect-video rounded-md shadow-md"
        src={videoUrl}
        title="Publication video"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen
      ></iframe>
    </div>
  )}

  <div class="space-y-1">
    <strong class="block text-xl font-semibold ">{title}</strong>
    <span class="block">{authors}</span>
    <span class="block font-light italic">{conference}</span>

    <div class="mt-3 flex items-center space-x-4">
      {pdfUrl && (
        <a href={pdfUrl} target="_blank" rel="noopener noreferrer" class="theme-btn">
          PDF
        </a>
      )}
      {articleUrl && (
        <a href={articleUrl} target="_blank" rel="noopener noreferrer" class="theme-btn">
          Article
        </a>
      )}
      {projectUrl && (
        <a href={projectUrl} target="_blank" rel="noopener noreferrer" class="theme-btn">
          Project
        </a>
      )}
      {videoUrl && (
        <a href={videoUrl} target="_blank" rel="noopener noreferrer" class="theme-btn">
          Video
        </a>
      )}

      {bibtex && (
        <Modal id={`bibtex-modal-${uniqueId}`} open="BibTeX">
          <span slot="main">{bibtex}</span>
        </Modal>
      )}
    </div>
  </div>
</div>